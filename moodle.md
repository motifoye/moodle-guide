# Moodle

> Версия Moodle: 5.0  

В этих документах описаны термины и отдельные компоненты СДО Moodle.
Информация взята из официальной документации и других источников.

## Контент

- [Информационная панель][lms]
- [Календарь][calendar]

[dckrcmps]: docker-compose.md
[lms]: inf-panel-lms.md
[mdldckr]: moodle-docker.md
[calendar]: calendar.md

[terminology]: https://moodle.org/mod/data/view.php?id=7176
[dev-sub-plugins]: https://docs.moodle.org/dev/Subplugins
[plugintypes]: https://moodledev.io/docs/5.0/apis/plugintypes
[plugintypes-naming]: https://moodledev.io/docs/5.0/apis/plugintypes#naming-conventions
[pt-mod]: https://moodledev.io/docs/5.0/apis/plugintypes/mod

## Термины

**СДО** — Среда дистанционного обучения.

**Moodle** (Modular Object-Oriented Dynamic Learning Environment) — это система управления обучением (LMS), которая используется для создания онлайн-курсов и образовательных платформ. Название представляет собой аббревиатуру, где:

- Modular — означает модульность, что позволяет настраивать и адаптировать платформу в зависимости от нужд учебного процесса.
- Object-Oriented — указывает на объектно-ориентированную архитектуру, что делает систему гибкой и расширяемой.
- Dynamic — обозначает динамическое изменение и возможность адаптации платформы под различные задачи.
- Learning Environment — это образовательная среда, которая предоставляет инструменты для преподавателей и студентов.

**Компонент** — это элемент системы, который представляет собой отдельный функциональный блок, обладающий определённой ролью и структурой в рамках платформы. Компоненты разрабатываются для расширения возможностей Moodle и могут взаимодействовать друг с другом для создания сложных функциональных возможностей.

**Плагин** — это общее название для любых дополнительных компонентов, которые расширяют функциональность системы.

> Все плагины являются компонентами, поскольку они добавляют или изменяют определённые части системы. Но не все компоненты являются плагинами, так как некоторые компоненты являются частью основного функционала Moodle и не могут быть удалены или заменены так же легко, как плагины.

**Информационная (навигационная) панель (Dashboard)** — это элемент интерфейса, содержащий ссылки и инструменты. Может включать ссылки на курсы, уведомления, отчёты, профиль пользователя и другие часто используемые разделы системы. [Подробнее][lms]

**Элемент (item)** — в официальной документации этот термин не рассматривается как отдельное ключевое понятие, но иногда используется для описания различных составляющих учебного контента и курса. Moodle в основном строится из трёх категорий элементов для учебного процесса:

- Активности (Activities) и Модули активности (Module Activities)
- Ресурсы (Resources)
- Блоки (Blocks)

[Официальная терминология Moodle][terminology]

## Комплектация Moodle

Moodle включает в стандартный пакет множество встроенных плагинов, разделенных по различным категориям для удобства администрирования, управления курсами и взаимодействия со студентами. В типовой установке Moodle присутствуют такие плагины, как:

1. **Активности** – это модули, которые стимулируют активное участие студентов. [Перейти](#активности-и-модули-активности)
2. **Ресурсы** – плагины для предоставления учебного контента. [Перейти](#ресурсы)
3. **Редакторы** – например, Atto и TinyMCE, для форматирования текста и добавления медиа.
4. **Темы** – в Moodle поставляется несколько стандартных тем, например, Boost, чтобы можно было кастомизировать внешний вид сайта.

Также система включает **инструменты аутентификации и авторизации**, плагины для работы с **репозиториями файлов** (например, Google Drive, OneDrive), **блоки** для добавления виджетов (например, Календарь или Последние новости) и многие другие. Эти плагины предоставляют Moodle базовую функциональность, которую можно дополнить, устанавливая дополнительные расширения из [каталога](https://moodle.org/plugins) Moodle.

Для более подробного описания плагинов, входящих в комплект Moodle, можно ознакомиться с [разделом FAQ на Moodle Docs](https://docs.moodle.org/405/en/Plugins_FAQ) и описанием модульности Moodle [здесь](https://support.moodle.com/support/solutions/articles/80001075423-moodle-s-modularity-plugins-and-themes).

## Управление плагинами

В Moodle управление плагинами включает несколько этапов: установку, активацию, обновление и удаление. Вот основные способы:

### 1. Установка плагинов через интерфейс Moodle

- **Переход в раздел администратора**: В меню навигации перейти в «Администрирование сайта» > «Плагины» > «Установка плагинов».
- **Загрузка плагина из каталога Moodle**: Вы можете найти нужный плагин в [каталоге плагинов Moodle](https://moodle.org/plugins) и загрузить его прямо через интерфейс Moodle.
- **Загрузка через URL или из файла**: Если у вас есть ZIP-файл плагина, его можно загрузить, нажав «Установить плагин из ZIP-файла».

### 2. Управление плагинами через CLI

Moodle CLI предоставляет команды для управления плагинами, особенно удобно, если у вас нет доступа к интерфейсу:

- **Установка плагинов**: Скопируйте файлы плагина в соответствующую папку (`moodle/mod`, `moodle/theme` и т.д.), затем выполните команду обновления базы данных:

    ```bash
    php admin/cli/upgrade.php
    ```

- **Активация или деактивация плагинов**: Некоторые плагины можно временно отключить, используя команду:

    ```bash
    php admin/cli/purge_caches.php
    ```

### 3. Обновление и удаление плагинов

- **Обновление плагина**: Вы можете скачать новую версию и загрузить её поверх существующего плагина. После загрузки новой версии выполните команду обновления базы данных.
- **Удаление плагина**: Перейдите в «Администрирование сайта» > «Плагины» > «Обзор плагинов». Найдите нужный плагин и нажмите «Удалить». Это удалит записи о плагине из базы данных Moodle, но для полного удаления нужно удалить файлы вручную.

### 4. Плагины через Docker (если Moodle развёрнут в контейнере)

Если ваш Moodle работает в контейнере Docker, файлы плагинов можно добавлять как тома или копировать во время сборки образа. Например, добавьте плагин в Dockerfile:

```dockerfile
COPY myplugin /var/www/html/moodle/mod/
RUN php admin/cli/upgrade.php --non-interactive
```

Эти методы позволяют гибко управлять плагинами в Moodle в зависимости от ваших предпочтений и условий доступа к системе.

## Типы плагинов

Moodle придерживается общей философии модульности. Одним из его основных принципов является расширяемость, и это в первую очередь достигается за счет разработки плагинов.

Вся экосистема Moodle построена на различных типах плагинов, существует более 50 различных типов. Они позволяют адаптировать платформу под конкретные нужды пользователя или образовательной организации. Плагины могут быть разных типов, включая модули, блоки, фильтры, темы оформления, отчёты и другие компоненты. Каждый тип выполняет конкретную роль в системе.

Во всех плагинах могут находиться [Общие файлы](commonfiles/index.md)

> Полный список типов плагинов см. [Plugin types][plugintypes]

## Активности и Модули активности

В контексте **Moodle**, **активности** — это интерактивные элементы, которые требуют участия пользователей (студентов) и включают в себя различные виды образовательной деятельности. Эти элементы позволяют студентам выполнять задачи, участвовать в обсуждениях, проходить тесты и другие учебные мероприятия, направленные на активное вовлечение в процесс обучения.

**Модули активности** — это отдельные функциональные единицы, которые позволяют создать взаимодействие между пользователями и системой. Каждый модуль активности отвечает за определённый тип учебной или интерактивной деятельности, например, тестирование, задания или обсуждения.

### Важное отличие: Активности и модули активности

- **Активности** — это концептуальная категория, для всех элементов, которые требуют участия пользователя. Они могут быть различными по формату, например, тесты, задания, форумы и другие.
- **Модули активности** — это технические реализации этих активностей в Moodle. Каждый модуль активности является частью системы, которая реализует какую-то активность. Например, **модуль теста** реализует активность тестирования, а **модуль форума** — активность обсуждения.

### **Примеры активностей:**

1. **Тесты** (`Quiz`) — позволяют преподавателям создавать задания с вопросами, которые студенты должны решить.
2. **Задания** (`Assignment`) — дают возможность преподавателям создать задания для студентов, которые они могут выполнять и сдавать для оценки.
3. **Форумы** (`Forum`) — предоставляют пространство для обсуждений среди студентов и преподавателей.
4. **Чаты** (`Chat`) — обеспечивают синхронное общение между участниками курса.
5. **Анкеты** (`Survey`) — Элемент курса, содержащий набор опросных листов (преимущественно социологических).

### **Примеры модулей активности:**

1. **Модуль тестов (`mod_quiz`)** — позволяет создавать и проводить тесты с различными типами вопросов.
2. **Модуль форума (`mod_forum`)** — предоставляет возможность для общения и обсуждения материалов курса в виде форумов.
3. **Модуль заданий (`mod_assign`)** — позволяет преподавателям создавать задания, которые студенты могут выполнять и сдавать для оценки.
4. **Модуль чатов (`mod_chat`)** — организует синхронное общение между участниками курса.
5. **Модуль анкеты (`mod_survey`)** — Элемент курса, содержащий набор опросных листов (преимущественно социологических).

> Интерактивный учебный модуль, размещенный в курсе. Элементами курса являются, в частности: LAMS; SCORM; Wiki; анкета; база данных; глоссарий; задание; лекция; обратная связь; опрос; рабочая тетрадь; ресурс; семинар; тест; упражнение; форум; чат.

Модули активности в Moodle создаются с целью вовлечения студентов в учебный процесс и стимуляции их активности через выполнение заданий, участие в тестах, форумах и других формах взаимодействия.

### Что не является модулем активности?

- **Ресурсы** (например, **файл**, **страница**, **ссылка**, ...) — это элементы курса, предоставляющие материалы для чтения или просмотра, но не предполагающие активного взаимодействия с пользователем. Эти элементы являются скорее «пассивными» и не создают двустороннего взаимодействия.
- **Блоки** (например, блоки календаря или новостей) — это элементы интерфейса, которые предоставляют дополнительную информацию, но не включают учебную активность.

## Ресурсы

Ресурс — это элемент, который учитель может добавить в курс Moodle для поддержки обучения, например файл, видео или ссылку на веб-сайт. Ресурс отличается от действия тем, что он статичен; Т.е. студент может просто смотреть или читать это, а не участвовать. Ресурсы отображаются в виде одной ссылки со значком перед ней, представляющим тип ресурса.

Преподаватель может добавить ресурсы, включив редактирование и нажав кнопку Добавить действие или ресурс в разделе курса. Затем они выбирают ресурс из окна выбора действий. (Если средство выбора активности было отключено, вместо него появится раскрывающееся меню.) Ресурсы обычно появляются в центральной области курса.

Администраторы могут решить, требовать ли от учителей добавлять описания для каждого ресурса через настройку «Требовать описание активности», Администрирование сайта > Плагины > Общие настройки активности.

Moodle поддерживает ряд типов ресурсов, которые преподаватели могут добавлять в свои курсы:

- **Книга** - Многостраничный ресурс в книжном формате, с главами и подглавами. Книги могут содержать как медиафайлы, так и текст и полезны для отображения длинных фрагментов информации, которые могут быть разбиты на разделы.
- **Файл** - Изображение, PDF-файл, электронная таблица, звуковой файл, видеофайл или файл любого другого типа. По возможности файл будет отображаться в интерфейсе курса; В противном случае учащимся будет предложено загрузить его.
- **Папка** — для помощи в организации файлов. Папка может содержать другие папки.
- **Пакет** содержимого IMS - Для добавления статического материала из других источников в стандартном формате пакета содержимого IMS.
- **Страница** — веб-страница, которую учитель создает с помощью текстового редактора.
- **Текстовая** и мультимедийная область - Для отображения текста и мультимедиа на странице курса.
- **URL** — для предоставления веб-ссылки в качестве ресурса курса.

## Блок

Плагины типа Block позволяют отображать дополнительную информацию и функции в различных частях Moodle.

Это вспомогательные элементы страницы, которые можно добавить слева, справа или с обеих сторон страницы, а также на [информационную (навигационную) панель LMS][lms]. Внешний вид блоков и их расположение изменяется в зависимости от темы LMS.

Нпример, теги, календарь, курсы, список последних сообщений.

## Плагины для интеграции с другими сервисами
<!-- TODO: написать про интеграции -->
например, плагины для синхронизации с внешними базами данных, системами управления обучением (LMS), облачными сервисами и т. д.

## Фильтры

В Moodle фильтры применяются для автоматической обработки текста, отображаемого пользователям. С помощью фильтров можно улучшить отображение контента, добавлять мультимедийные элементы, вставлять формулы и выполнять другие действия. Вот основные моменты работы с фильтрами в Moodle:

### 1. Типы фильтров в Moodle

- **Автоматические ссылки на ресурсы**: Moodle автоматически преобразует названия курсов и ресурсов в ссылки, упрощающие навигацию.
- **Мультимедийные фильтры**: Преобразуют URL-адреса медиафайлов (например, YouTube, аудио) в встроенные проигрыватели.
- **MathJax и Tex**: Фильтры для отображения математических формул и символов.
- **Геогебра и GeoGebra**: Для вставки интерактивной математики и геометрии с помощью GeoGebra.
- **Фильтр эмодзи**: Преобразует текст в смайлики.

### 2. Включение и отключение фильтров

Включить или отключить фильтры можно на уровне всего сайта, курсов или отдельных элементов:

- Перейдите в **«Администрирование сайта» > «Плагины» > «Фильтры» > «Управление фильтрами»**.
- Выберите нужный фильтр и установите его состояние:
  - **Активировать на уровне всего сайта**
  - **Активировать только в конкретных курсах**
  - **Отключить**

### 3. Настройка фильтров на уровне курса

Для более гибкого управления фильтрами вы можете включать их в отдельных курсах:

- Войдите в настройки курса и найдите раздел **«Фильтры»**.
- Здесь можно включить или отключить конкретные фильтры для текущего курса, независимо от глобальных настроек.

### 4. Управление фильтрами для определенных элементов

На уровне элементов (например, страницы, задания) также можно выбрать, какие фильтры применять:

- Откройте настройки ресурса или элемента.
- Найдите раздел **«Фильтры»** и выберите нужные настройки.

### 5. Создание и добавление пользовательских фильтров

- Пользовательские фильтры позволяют добавлять уникальные функции. Для этого необходимо разработать фильтр, который будет распознавать определенные шаблоны текста и преобразовывать их.
- Пользовательские фильтры добавляются в папку `filter` в каталоге Moodle и настраиваются через CLI или админ-панель.

### 6. Очистка кэша фильтров

Для применения изменений или устранения ошибок можно очистить кэш фильтров.

**Администрирование сайта** > **Разработка** > **Очистить кэши**

## Соглашения об именовании

В Moodle есть определенные соглашения по названию файлов и структуре плагинов, которые позволяют системе правильно идентифицировать и загружать их.

Плагины обычно имеют минимум два названия: *отображаемое пользователям* и *используемое внутри системы*. Системное имя должно содержать только строчные буквы, цифры и символы подчеркивания. Дефис и знак минус не допускаются.

> Валидация имени плагина происходит в `core_component::is_valid_plugin_name()` и используется следующее регулярное выражение:
>
> ```re
> /^[a-z](?:[a-z0-9_](?!__))*[](a-z0-9)+$/
> ```

### Основной файл плагина и его название

Основной файл плагинов именуется в соответствии с форматом `типплагина_имяплагина.php`.

Так для блока с названием `exampleblock` основной файл будет называться `block_exampleblock.php`. Для модуля активности с названием `examplemodule` основной файл будет `mod_examplemodule.php`. Для фильтра с названием `examplefilter` основной файл будет `filter_examplefilter.php`.

Этот файл содержит основную логику работы плагина, определяя его базовые классы и методы. Moodle *идентифицирует* этот файл *по имени*, что позволяет системе распознать плагин и правильно его загрузить.

### Структура и расположение файлов плагина

Каждый тип плагина должен находиться в соответствующей папке, чтобы Moodle распознал его тип. Вот несколько примеров:

- Модули активности располагаются в папке `mod/`. Например, для модуля `examplemodule` папка будет `moodle/mod/examplemodule`.
- Блоки располагаются в папке `blocks/`. Например, для блока `exampleblock` папка будет `moodle/blocks/exampleblock`.
- Фильтры располагаются в папке `filter/`. Например, для фильтра `examplefilter` папка будет `moodle/filter/examplefilter`.

### Файл `version.php`

Каждый плагин должен содержать файл `version.php`, который сообщает Moodle о версии плагина и других параметрах, таких как минимальная версия Moodle, с которой совместим плагин. Этот файл также помогает Moodle управлять обновлениями плагина.

Пример содержимого файла version.php:

```php
<?php
defined('MOODLE_INTERNAL') || die();

$plugin->component = 'block_exampleblock';  // Уникальное имя плагина
$plugin->version = 2023110800;               // Версия плагина
$plugin->requires = 2021051700;              // Минимальная версия Moodle
$plugin->maturity = MATURITY_STABLE;
$plugin->release = '1.0';
```

Поле `$plugin->component` состоит из типа и имени плагина, `block_exampleblock`. Это уникальный идентификатор, который Moodle использует для идентификации и управления плагином.

Поле `$plugin->maturity` указывает на уровень стабильности (зрелости) плагина в Moodle. Оно помогает администраторам и пользователям понять, насколько плагин готов к использованию в продуктивной среде.

<details>
<summary>Возможные значения</summary>

- `MATURITY_ALPHA`: Плагин находится на стадии альфа-тестирования. Этот уровень указывает, что плагин ещё не стабилен и предназначен только для тестирования разработчиками. Плагин может содержать ошибки и не завершённые функции.
- `MATURITY_BETA`: Плагин на стадии бета-тестирования. Он более стабилен, чем альфа-версия, но всё ещё может содержать баги. Обычно такой плагин используется для тестирования сообществом или для внесения окончательных исправлений.
- `MATURITY_RC` (Release Candidate): Кандидат на релиз. Плагин готов к использованию, но его всё ещё нужно протестировать в реальной среде. На этом этапе разработчики могут исправлять незначительные ошибки и оптимизировать код перед полноценным выпуском.
- `MATURITY_STABLE`: Стабильный релиз. Плагин полностью готов к использованию в продуктивной среде, протестирован и не содержит известных критических ошибок. Это рекомендованный уровень для установки на реальные учебные порталы.

Зачем указывать

- Автоматические обновления: В некоторых случаях Moodle может использовать эту информацию для фильтрации плагинов, которые подходят для автоматического обновления. Стабильные версии считаются более безопасными для таких обновлений.
- Помощь в тестировании и обратной связи: Разработчики, публикующие плагины, могут указать низкий уровень зрелости (например, `MATURITY_ALPHA` или `MATURITY_BETA`) для сбора отзывов и дальнейшего улучшения плагина.

</details>

### Файл `lib.php`

Для некоторых плагинов, таких как модули активности, блоки и фильтры, существует стандартный файл, который часто используется для хранения функций, специфичных для этого плагина.

- Модули активности могут иметь файл `lib.php` для определения функций, связанных с их поведением в курсе.

- В блоках файл `lib.php` может содержать функции для отображения и настройки блока.

### Другие обязательные файлы

- `access.php`: файл, в котором определяются права доступа для пользователей плагина.

- `lang/en/имяплагина.php`: файл языковых строк для локализации текста плагина.

- `db/install.xml` и `db/upgrade.php`: файлы для установки и обновления базы данных плагина, если он использует собственные таблицы.

### Пример структуры плагина блока

Для блока `exampleblock` структура папки будет выглядеть примерно так:

```text
moodle/
└── blocks/
    └── exampleblock/
        ├── block_exampleblock.php        // Основной файл блока
        ├── version.php                   // Версия и метаданные плагина
        ├── db/
        │   ├── access.php                // Права доступа для плагина
        ├── lang/
        │   └── en/
        │       └── block_exampleblock.php // Языковые строки
        └── lib.php                       // Дополнительные функции, если нужны
```

### Как Moodle понимает структуру плагина

Moodle автоматически сканирует папки с плагинами и проверяет наличие `version.php` и основного файла плагина (например, `block_exampleblock.php`). Эта структура и соглашение об именах позволяют Moodle автоматически распознавать новый плагин, добавлять его в систему и предоставлять доступ к его настройкам через интерфейс администратора.

