# Moodle

> Версия Moodle: 5.0  

В этих документах описаны термины и отдельные компоненты СДО Moodle.
Информация взята из официальной документации и других источников.

## Контент

- [СДО Moodle в Docker][mdldckr]
- [Информационная панель][lms]

[lms]: moodle-lms.md
[mdldckr]: moodle-docker.md

[terminology]: https://moodle.org/mod/data/view.php?id=7176
[dev-sub-plugins]: https://docs.moodle.org/dev/Subplugins
[plugintypes]: https://moodledev.io/docs/5.0/apis/plugintypes
[plugintypes-naming]: https://moodledev.io/docs/5.0/apis/plugintypes#naming-conventions
[pt-mod]: https://moodledev.io/docs/5.0/apis/plugintypes/mod


## Термины

- СДО — Среда дистанционного обучения.

- Moodle (Modular Object-Oriented Dynamic Learning Environment) — это система управления обучением (LMS), которая используется для создания онлайн-курсов и образовательных платформ. Название представляет собой аббревиатуру, где:

  - **Modular** означает модульность, что позволяет настраивать и адаптировать платформу в зависимости от нужд учебного процесса.
  - **Object-Oriented** указывает на объектно-ориентированную архитектуру, что делает систему гибкой и расширяемой.
  - **Dynamic** обозначает динамическое изменение и возможность адаптации платформы под различные задачи.
  - **Learning Environment** — это образовательная среда, которая предоставляет инструменты для преподавателей и студентов.

- Плагин — это общее название для любых дополнительных компонентов, которые расширяют функциональность системы.

- Информационная (навигационная) панель — это область, содержащая ссылки и инструменты. [Подробнее][lms]

[Официальная терминология Moodle][terminology]

## Типы плагинов

Moodle придерживается общей философии модульности. Одним из его основных принципов является расширяемость, и это в первую очередь достигается за счет разработки плагинов.

Вся экосистема Moodle построена на различных типах плагинов, существует более 50 различных типов. Они позволяют адаптировать платформу под конкретные нужды пользователя или образовательной организации. Плагины могут быть разных типов, включая модули, блоки, фильтры, темы оформления, отчёты и другие компоненты. Каждый тип выполняет конкретную роль в системе.

### Что можно найти во всех плагинах

Несмотря на то, что существует множество различных типов плагинов, есть некоторые вещи, которые работают одинаково во всех типах плагинов.

**Общие файлы** — могут присутствовать в любой *подсистеме Moodle* или *типе плагина*. Некоторые из этих файлов являются обязательными и должны существовать внутри компонента, в то время как другие являются необязательными.

## Описание типов плагинов

> Полный список типов плагинов см. [Plugin types][plugintypes]

### Модули активности

Являются основной функцией курса и, как правило, основной способ подачи учебного контента в Moodle. Это *тип плагина*, который добавляет функциональность для выполнения конкретных учебных действий или различных типов взаимодействия между студентами и преподавателями в рамках учебного процесса.

Все плагины модуля активности находятся в папке `/mod`.

Полная [документация][pt-mod] по модулям

Примеры модулей активности

- **Assignment**: используется для создания заданий, которые студенты могут выполнять и загружать в Moodle.

- **Quiz**: предназначен для создания тестов с вопросами для проверки знаний студентов.

- **Forum**: позволяет организовать обсуждения на различные темы, где студенты и преподаватели могут оставлять сообщения.

- **Wiki**: используется для создания совместных проектов или ресурсов, которые студенты могут редактировать.

> Модули ресурсов — иногда модуль активности выделяют как модуль ресурса.  
> Ссылка на старую версию [документации](https://moodledev.io/docs/plugins/resources). На момент написания этого документа, уже не доступна.

**Модули ресурсов** предоставляют различные виды материалов, которые преподаватели могут добавить в курсы. Это может быть текстовый файл, ссылка на сторонний сайт, встраиваемое видео и другие ресурсы.

Примеры модулей ресурсов:

- **File**: позволяет добавлять файлы различных форматов, доступные для загрузки.
- **URL**: добавляет ссылки на внешние ресурсы, которые можно открыть в браузере.
- **Page**: позволяет создавать страницы с текстом и мультимедийными элементами.
- **Label**: текстовая метка, которую можно использовать для визуального структурирования курса.

### Блок

Плагины типа Block позволяют отображать дополнительную информацию и функции в различных частях Moodle.

Это вспомогательные элементы страницы, которые можно добавить слева, справа или с обеих сторон страницы, а также на [информационную (навигационную) панель LMS][lms]. Внешний вид блоков и их расположение изменяется в зависимости от темы LMS.

Нпример, теги, календарь, курсы, список последних сообщений.

### Плагины для интеграции с другими сервисами

например, плагины для синхронизации с внешними базами данных, системами управления обучением (LMS), облачными сервисами и т. д.

## Соглашения об именовании

В Moodle есть определенные соглашения по названию файлов и структуре плагинов, которые позволяют системе правильно идентифицировать и загружать их.

Плагины обычно имеют минимум два названия: *отображаемое пользователям* и *используемое внутри системы*. Системное имя должно содержать только строчные буквы, цифры и символы подчеркивания. Дефис и знак минус не допускаются.

> Валидация имени плагина происходит в `core_component::is_valid_plugin_name()` и используется следующее регулярное выражение:
>
> ```re
> /^[a-z](?:[a-z0-9_](?!__))*[](a-z0-9)+$/
> ```

### Основной файл плагина и его название

Основной файл плагинов именуется в соответствии с форматом `типплагина_имяплагина.php`.

Так для блока с названием `exampleblock` основной файл будет называться `block_exampleblock.php`. Для модуля активности с названием `examplemodule` основной файл будет `mod_examplemodule.php`. Для фильтра с названием `examplefilter` основной файл будет `filter_examplefilter.php`.

Этот файл содержит основную логику работы плагина, определяя его базовые классы и методы. Moodle *идентифицирует* этот файл *по имени*, что позволяет системе распознать плагин и правильно его загрузить.

### Структура и расположение файлов плагина

Каждый тип плагина должен находиться в соответствующей папке, чтобы Moodle распознал его тип. Вот несколько примеров:

- Модули активности располагаются в папке `mod/`. Например, для модуля `examplemodule` папка будет `moodle/mod/examplemodule`.

- Блоки располагаются в папке `blocks/`. Например, для блока `exampleblock` папка будет `moodle/blocks/exampleblock`.

- Фильтры располагаются в папке `filter/`. Например, для фильтра `examplefilter` папка будет `moodle/filter/examplefilter`.

### Файл `version.php`

Каждый плагин должен содержать файл `version.php`, который сообщает Moodle о версии плагина и других параметрах, таких как минимальная версия Moodle, с которой совместим плагин. Этот файл также помогает Moodle управлять обновлениями плагина.

Пример содержимого файла version.php:

```php
<?php
defined('MOODLE_INTERNAL') || die();

$plugin->component = 'block_exampleblock';  // Уникальное имя плагина
$plugin->version = 2023110800;               // Версия плагина
$plugin->requires = 2021051700;              // Минимальная версия Moodle
$plugin->maturity = MATURITY_STABLE;
$plugin->release = '1.0';
```

Поле `$plugin->component` состоит из типа и имени плагина, `block_exampleblock`. Это уникальный идентификатор, который Moodle использует для идентификации и управления плагином.

Поле `$plugin->maturity` указывает на уровень стабильности (зрелости) плагина в Moodle. Оно помогает администраторам и пользователям понять, насколько плагин готов к использованию в продуктивной среде.

<details>
<summary>Возможные значения</summary>

- `MATURITY_ALPHA`: Плагин находится на стадии альфа-тестирования. Этот уровень указывает, что плагин ещё не стабилен и предназначен только для тестирования разработчиками. Плагин может содержать ошибки и не завершённые функции.

- `MATURITY_BETA`: Плагин на стадии бета-тестирования. Он более стабилен, чем альфа-версия, но всё ещё может содержать баги. Обычно такой плагин используется для тестирования сообществом или для внесения окончательных исправлений.

- `MATURITY_RC` (Release Candidate): Кандидат на релиз. Плагин готов к использованию, но его всё ещё нужно протестировать в реальной среде. На этом этапе разработчики могут исправлять незначительные ошибки и оптимизировать код перед полноценным выпуском.

- `MATURITY_STABLE`: Стабильный релиз. Плагин полностью готов к использованию в продуктивной среде, протестирован и не содержит известных критических ошибок. Это рекомендованный уровень для установки на реальные учебные порталы.

Зачем указывать

- Автоматические обновления: В некоторых случаях Moodle может использовать эту информацию для фильтрации плагинов, которые подходят для автоматического обновления. Стабильные версии считаются более безопасными для таких обновлений.

- Помощь в тестировании и обратной связи: Разработчики, публикующие плагины, могут указать низкий уровень зрелости (например, `MATURITY_ALPHA` или `MATURITY_BETA`) для сбора отзывов и дальнейшего улучшения плагина.

</details>

### Файл `lib.php`

Для некоторых плагинов, таких как модули активности, блоки и фильтры, существует стандартный файл, который часто используется для хранения функций, специфичных для этого плагина.

- Модули активности могут иметь файл `lib.php` для определения функций, связанных с их поведением в курсе.

- В блоках файл `lib.php` может содержать функции для отображения и настройки блока.

### Другие обязательные файлы

- `access.php`: файл, в котором определяются права доступа для пользователей плагина.

- `lang/en/имяплагина.php`: файл языковых строк для локализации текста плагина.

- `db/install.xml` и `db/upgrade.php`: файлы для установки и обновления базы данных плагина, если он использует собственные таблицы.

### Пример структуры плагина блока

Для блока `exampleblock` структура папки будет выглядеть примерно так:

```text
moodle/
└── blocks/
    └── exampleblock/
        ├── block_exampleblock.php        // Основной файл блока
        ├── version.php                   // Версия и метаданные плагина
        ├── db/
        │   ├── access.php                // Права доступа для плагина
        ├── lang/
        │   └── en/
        │       └── block_exampleblock.php // Языковые строки
        └── lib.php                       // Дополнительные функции, если нужны
```

### Как Moodle понимает структуру плагина

Moodle автоматически сканирует папки с плагинами и проверяет наличие `version.php` и основного файла плагина (например, `block_exampleblock.php`). Эта структура и соглашение об именах позволяют Moodle автоматически распознавать новый плагин, добавлять его в систему и предоставлять доступ к его настройкам через интерфейс администратора.

