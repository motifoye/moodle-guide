# version.php

Каждый плагин должен иметь файл `version.php`, расположенный в корневом каталоге плагина.

Он содержит ряд свойств, которые используются в процессе установки и обновления плагина. Он позволяет убедиться, что плагин совместим с данным сайтом Moodle, а также определить, требуется ли обновление.

### Свойства

**Component**  
`string` `обязательный`

Component содержит имя плагина в формате [frankenstyle](https://moodledev.io/general/development/policies/codingstyle/frankenstyle)

```php
$plugin->component = 'plugintype_pluginname';
```

Это значение используется в процессе установки и обновления для диагностики и проверки, чтобы убедиться, что код плагина был развернут в правильном месте в дереве кода Moodle.

**Version**  
`integer` `обязательный`

Номер версии плагина. Формат частично основан на дате и имеет вид YYYYMMDDXX, где XX - это инкрементный счетчик для данного года (YYYY), месяца (MM) и даты (DD) выпуска версии плагина. Каждая новая версия плагина должна иметь увеличенный номер в этом файле, что обнаруживается ядром Moodle и запускает процесс обновления. 

Если поддерживается несколько стабильных веток плагина, то часть даты YYYYMMDD должна быть заморожена на дате форка ветки, а XX используется для увеличения значения на данной стабильной ветке (допускается до 100 обновлений на данной стабильной ветке). Ключевым моментом является то, что номер версии всегда увеличивается как по горизонтали (в пределах одной стабильной ветки более поздние обновления имеют более высокий XX, чем все предыдущие), так и по вертикали (между любыми двумя стабильными ветками более новая ветка имеет YYYYMMDD00 выше, чем более старая стабильная ветка). Обратите на это внимание. Его легко испортить и трудно исправить.

```php
$plugin->version = 2022061700;
                // YYYY
                //     MM
                //       DD
                //         XX
```

**Maturity**  
`enum` `рекомендовано`


Зрелость плагина, иначе называемая его стабильностью. Это значение влияет на доступность функции уведомлений об обновлениях в Moodle.. 

Администраторы могут настроить свой сайт таким образом, чтобы не получать уведомления о доступном обновлении, если оно не имеет определенного уровня зрелости.

```php
/** Software maturity level - internals can be tested using white box techniques. */
define('MATURITY_ALPHA', 50);
/** Software maturity level - feature complete, ready for preview and testing. */
define('MATURITY_BETA', 100);
/** Software maturity level - tested, will be released unless there are fatal bugs. */
define('MATURITY_RC', 150);
/** Software maturity level - ready for production deployment. */
define('MATURITY_STABLE', 200);
/** Any version - special value that can be used in $plugin->dependencies in version.php files. */
define('ANY_VERSION', 'any');
```

<!-- TODO Дополнить свойства файла версий  -->