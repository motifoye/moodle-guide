<p style="text-align: right; font-size:.7em; font-style:italic">Moodle 4.5</p>

# Посещаемость

### Плагин учета посещаемости `Attendance`


> Не является стандартным плагином, т.е. устанавливается дополнительно из [каталога плагинов](https://moodle.org/plugins/index.php/?q=attendance).
>
> <https://moodle.org/plugins/mod_attendance>

Может выполнять две функции:

1. Учет посещаемости курса;
2. Отображение событий (расписания) в календаре.

**Задача:**  Настроить доступ для старосты группы так, чтобы он мог отмечать посещаемость студентов только своей группы. ~~При этом должна оставаться заметка, что это действие совершил староста. И установить ограничение на изменение в конкретный временной промежуток.~~

**1. Настройка роли для старосты:**

1. Перейдите в `Администрирование сайта → Пользователи → Управление ролями`.

2. Нажмите **Добавить новую роль** и выберите подходящий прототип, например, **Студент**.

3. Настройте следующие разрешения:

   - `mod/attendance:takeattendances` (разрешить) — для того, чтобы отмечать посещаемость.
  
   - `mod/attendance:viewreports` (разрешить) — чтобы староста мог видеть отчеты.

   - `mod/attendance:manageattendances` (запретить) — чтобы староста не мог менять настройки.

Назовите роль, например, "Староста группы". Сохраните изменения.

> С такими правами доступа, установленное ограничение, для работы с группой, работает не корректно при наличии в курсе нескольких групп. Появляется некое пересечение доступа, возможно, плагин не проверяет группы, что они разные.
>
> Один из вариантов решения, выдать право на **Редактирование посещаемости `mod/attendance:changeattendances`**. Однако, это позволит изменять посещаемость занятия в любое время, и до начала, и неделю спустя. Собственно, преподаватель также может.

**2. Ограничение на работу только со своей группой:**

1. В настройках курса включите **Групповой режим**: `Настройки → Группы`.

2. Создайте группы и распределите студентов и старосту по группам.

3. Включите **Групповой режим** в настройках активности **Attendance**: `Активность → Настройки → Общие настройки модуля`.

Выберайте режим **Изолированные группы**. Это позволит старосте работать только с посещаемостью своей группы.

**3. Логирование действий:**

Плагин сохраняет все действия, связенные с изменением посещаемости, в журнале событий Moodle.

***

В собственной базе данных этот плагин сохраняет следующие данные:

- `sessionid` - обозначает конкретное занятие;
- `statusid` - текущее значение, обозначающие отметку в журнале
- `statusset` - все возможные значения журнала, взятые для конкретного задания  
- `takenby` - id пользователя того, кто последний изменял значение

