# Опции в docker-compose файле

## links

Опция `links` используется для создания алиасов и соединения между контейнерами, позволяя одному контейнеру «видеть» другой по имени. Это упрощает сетевые взаимодействия и позволяет контейнерам взаимодействовать по их именам.

### Синтаксис:
```yaml
services:
  web:
    image: nginx
    links:
      - db
  db:
    image: mysql
```

В примере выше `web`-контейнер может обращаться к `db`-контейнеру через алиас `db`.

## networks

Начиная с Docker версии 2.1, **`links` считается устаревшим**. Вместо этого рекомендуется использовать `networks`, чтобы создать общую сеть для контейнеров. Пример с использованием `networks` вместо `links`:

```yaml
version: "3.8"
services:
  web:
    image: nginx
    networks:
      - my-network
  db:
    image: mysql
    networks:
      - my-network
networks:
  my-network:
```

Контейнер `web` по-прежнему может обращаться к `db`, и они будут находиться в одной сети.

Для более детальной информации по `links` и сетям Docker вы можете посетить [документацию Docker](https://docs.docker.com/compose/compose-file/compose-file-v2/#links) и руководство по [сетям Docker](https://docs.docker.com/network/).

## restart

Опция `restart` в Docker Compose используется для управления поведением перезапуска контейнеров. Она определяет, при каких условиях контейнер должен автоматически перезапускаться. Возможные значения:

1. **no** (по умолчанию): контейнер не будет перезапускаться автоматически.

2. **always**: контейнер будет всегда перезапущен, если остановится. Это полезно для сервисов, которые должны постоянно работать.

3. **on-failure**: контейнер будет перезапущен только в случае, если он завершится с ошибкой. Это подходит для сервисов, которые могут завершаться корректно, но требуют перезапуска при сбое.

4. **unless-stopped**: контейнер будет перезапущен, если остановится, за исключением случаев, когда его остановили вручную.

Пример использования опции `restart` в `docker-compose.yml`:

```yaml
version: "3.8"
services:
  web:
    image: nginx
    restart: always
    ports:
      - "8080:80"
```

Эта опция позволяет обеспечить стабильность сервисов, автоматически восстанавливая их в случае падения. Подробности можно найти в [документации Docker](https://docs.docker.com/compose/compose-file/compose-file-v3/#restart).
